(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[0],{65:function(e,t,a){},66:function(e,t,a){},68:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n,i,c=a(2),s=a.n(c),r=a(53),l=a.n(r),o=(a(65),a(10)),d=a(82),j=(a(66),a(16)),b=a(56),u=a(83),O=a(85),m=a(54),v=Object(b.a)({uri:"https://gravitel-graphql-backend.herokuapp.com/graphql"}),g=Object(m.a)((function(e,t){var a=t.headers,n=localStorage.getItem("token");return{headers:Object(j.a)(Object(j.a)({},a),{},{authorization:n?"Bearer ".concat(n):""})}})),h=new u.a({link:g.concat(v),cache:new O.a}),x=a(5),f=a(81),p=a(41),_=a(84),N=Object(_.a)(n||(n=Object(p.a)(["\n  mutation ($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      token\n    }\n  }\n"]))),k=Object(c.createContext)({token:"",setToken:function(){}}),S=function(){return Object(c.useContext)(k)},A=a(13),I=(a(68),a(4)),w=function(){var e=function(){var e=S().setToken,t=Object(c.useState)(""),a=Object(o.a)(t,2),n=a[0],i=a[1],s=Object(f.a)(N,{onCompleted:function(t){var a=t.login;e(null===a||void 0===a?void 0:a.token),localStorage.setItem("token",null===a||void 0===a?void 0:a.token)},onError:function(e){i(e.message)}}),r=Object(o.a)(s,2),l=r[0];return{signIn:function(e,t){l({variables:{username:e,password:t}})},loading:r[1].loading,error:n}}(),t=e.signIn,a=e.loading,n=e.error,i=function(e){var t=Object(c.useState)(e),a=Object(o.a)(t,2),n=a[0],i=a[1];return{handleChange:function(e){e.preventDefault(),i((function(t){return Object(j.a)(Object(j.a)({},t),{},Object(A.a)({},e.target.name,e.target.value))}))},form:n}}({email:"UserOne",password:"pass"}),s=i.form,r=s.email,l=s.password,d=i.handleChange;return Object(I.jsx)("div",{className:"signin__page",children:Object(I.jsxs)("div",{className:"signin",children:[Object(I.jsx)("div",{className:"signin__title",children:"\u0412\u0445\u043e\u0434"}),Object(I.jsx)("div",{className:"signin__text",children:"\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u0430\u044f \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430\u044f \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0431\u0438\u0437\u043d\u0435\u0441\u0430 \u0443\u0436\u0435 \u0441\u0435\u0439\u0447\u0430\u0441!"}),a&&Object(I.jsx)("div",{children:"Loading..."}),n&&Object(I.jsx)("div",{className:"signin__error",children:n}),Object(I.jsx)("div",{className:"signin__email signin__field",children:Object(I.jsx)("input",{name:"email",value:r,onChange:d,type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d"})}),Object(I.jsx)("div",{className:"signin__password signin__field",children:Object(I.jsx)("input",{name:"password",value:l,onChange:d,type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"})}),Object(I.jsx)("button",{onClick:function(){t(r,l)},className:"signin__submit",children:"\u0412\u043e\u0439\u0442\u0438"})]})})};!function(e){e.LOGIN="/login",e.DASHBOARD="/dashboard"}(i||(i={}));i.LOGIN,i.DASHBOARD;var D,C=a(86),B=Object(_.a)(D||(D=Object(p.a)(["\n  query {\n    dashboard {\n      scenarios {\n        active\n        inactive\n        completed\n      }\n      lists {\n        active\n        inactive\n        completed\n      }\n      dialogs {\n        active\n        inactive\n        completed\n      }\n    }\n  }\n"]))),F=(a(70),a(71),{dialogs:"\u0414\u0438\u0430\u043b\u043e\u0433\u0438",lists:"\u0421\u043f\u0438\u0441\u043a\u0438",scenarios:"\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u0438"}),y=function(e){return F[e]},L=a(57),T=a(15);T.d.register(T.h,T.a,T.l,T.f,T.m);var G=function(e){var t=e.title,a=e.info,n=a.active,i=a.inactive,s=a.completed,r=Object(c.useState)(),l=Object(o.a)(r,2),d=l[0],b=l[1],u=function(e){return"diagram__item"+(e===d?" diagram__item--active":"")},O=n+i+s,m={data:{datasets:[{data:[n,i,s],nameDiagram:t,backgroundColor:["#F9A752","#FCCF82","#F2F0F5"],borderWidth:3,cutout:"85%"}],labels:["\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435","\u041d\u0435\u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0435","\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435"]},options:{plugins:{legend:{display:!1},animation:{animateRotate:!0},tooltip:{enabled:!1}}},plugins:[{id:"hoverlabel",afterDraw:function(e){var a,n=e.ctx,i=e.chartArea,c=i.width,s=i.height;if(n.save(),(null===(a=e._active)||void 0===a?void 0:a.length)>0){var r=e.config.data,l=e._active[0].index,o=e._active[0].datasetIndex;console.log("_index",l);var d=y(t),j=r.datasets[o].data[l];n.font="normal 18px Arial",n.fillStyle="#000",n.textAlign="center",n.textBaseline="center",n.fillText(d,c/2,s/2-15),n.font="normal 45px Arial",n.fillStyle="#FF982B",n.fillText(j,c/2,s/2+35)}else{var b=y(t),u=O;n.font="normal 18px Arial",n.fillStyle="#000",n.textAlign="center",n.textBaseline="center",n.fillText(b,c/2,s/2-15),n.font="normal 45px Arial",n.fillStyle="#FF982B",n.fillText(u,c/2,s/2+35)}}}]},v=[{title:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0445:",value:n,classItem:"diagram__active"},{title:"\u041d\u0435\u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0445:",value:i,classItem:"diagram__inactive"},{title:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0445:",value:s,classItem:"diagram__completed"}];return Object(I.jsxs)("div",{className:"diagram__wrap",children:[Object(I.jsx)("div",{className:"diagram",children:Object(I.jsx)(L.a,Object(j.a)({},m))}),Object(I.jsxs)("div",{className:"diagram__table",children:[Object(I.jsxs)("div",{className:"diagram__total diagram__item",children:[Object(I.jsx)("div",{className:"diagram__item-text",children:"\u0412\u0441\u0435\u0433\u043e:"}),Object(I.jsx)("div",{children:O})]}),v.map((function(e,t){var a=e.title,n=e.value;e.classItem;return Object(I.jsxs)("div",{className:u(t),onMouseOver:function(){return b(t)},onMouseOut:function(){return b(null)},children:[Object(I.jsx)("div",{className:"diagram__item-text",children:a}),Object(I.jsx)("div",{children:n})]})}))]})]})},R=a.p+"static/media/logout.09aec618.svg",H=function(){var e=Object(x.g)(),t=S(),a=(t.token,t.setToken),n=function(){var e=Object(c.useState)({}),t=Object(o.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)(""),s=Object(o.a)(i,2),r=s[0],l=s[1],d=Object(C.a)(B,{}),j=Object(o.a)(d,2),b=j[0],u=j[1];return u.data,{getDashboard:function(){b().then((function(e){var t=e.data.dashboard,a=t.dialogs,i=t.lists,c=t.scenarios;n({scenarios:c,lists:i,dialogs:a})})).catch((function(e){l(e.message)}))},dashboard:a,loading:u.loading,error:r}}(),s=n.dashboard,r=n.error,l=n.getDashboard,d=n.loading;return Object(c.useEffect)((function(){l()}),[]),r?Object(I.jsxs)("div",{children:["error - ",r]}):d?Object(I.jsx)("div",{children:"Loading..."}):Object(I.jsx)("div",{className:"dashboard__page",children:Object(I.jsxs)("div",{className:"container",children:[Object(I.jsxs)("div",{className:"dashboard__nav",children:[Object(I.jsx)("div",{className:"dashboard__title",children:"\u0421\u0432\u043e\u0434\u043a\u0430"}),Object(I.jsx)("div",{className:"dashboard__logout",onClick:function(){a(""),localStorage.removeItem("token"),e(i.LOGIN)},children:Object(I.jsx)("img",{src:R,alt:"logout-img"})})]}),Object(I.jsx)("div",{className:"dashboard",children:s&&Object.entries(s).map((function(e){var t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(I.jsx)(G,{title:a,info:n})}))})]})})},E=function(){var e=S().token,t=Object(x.g)();return Object(c.useEffect)((function(){t(e?i.DASHBOARD:i.LOGIN)}),[e]),Object(I.jsx)("div",{className:"App",children:e?Object(I.jsxs)(x.d,{children:[Object(I.jsx)(x.b,{path:i.DASHBOARD,element:Object(I.jsx)(H,{})}),Object(I.jsx)(x.b,{path:"*",element:Object(I.jsx)(x.a,{to:i.DASHBOARD,replace:!0})})]}):Object(I.jsxs)(x.d,{children:[Object(I.jsx)(x.b,{path:i.LOGIN,element:Object(I.jsx)(w,{})}),Object(I.jsx)(x.b,{path:"*",element:Object(I.jsx)(x.a,{to:i.LOGIN,replace:!0})})]})})},$=a(37),q=function(){var e=Object(c.useState)(localStorage.getItem("token")),t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(I.jsx)(k.Provider,{value:{token:a,setToken:n},children:Object(I.jsx)(d.a,{client:h,children:Object(I.jsx)($.a,{children:Object(I.jsx)("div",{className:"App",children:Object(I.jsx)(E,{})})})})})};l.a.render(Object(I.jsx)(s.a.StrictMode,{children:Object(I.jsx)(q,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.93414517.chunk.js.map